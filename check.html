<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Socket.io Client</title>
    <script src="https://cdn.socket.io/socket.io-1.7.0.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const socket = io('http://localhost:8080/');

            // Send a notice to the server
            function sendNotice(department_id) {
                socket.emit('join_department', department_id);
            }

            // Listen for replies to the notice
            socket.on('reservations', function(msg) {
                console.log('Reply from server:', msg);
                const log = document.getElementById('log');
                const msgElem = document.createElement('div');
                msgElem.textContent = 'Server replied: ' + msg;
                log.appendChild(msgElem);
            });

            // Listen for disconnections
            socket.on('disconnect', function(reason) {
                console.log('Disconnected:', reason);
            });

            // UI interactions
            document.getElementById('sendNotice').addEventListener('click', function() {
                const noticeInput = document.getElementById('noticeInput');
                sendNotice(noticeInput.value);
                noticeInput.value = '';
            });
        });
    </script>
</head>
<body>
<h1>Socket.io Test Client</h1>
<input id="noticeInput" type="text" placeholder="Enter department id" />
<button id="sendNotice">Connect</button>
<div id="log"></div>
</body>
</html>